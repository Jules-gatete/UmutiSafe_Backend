import{u as f,e as j,r as t,j as e,L as v}from"./vendor_react-Dd6aiuOH-1761988153571.js";import{I as g}from"./Input-BWxF2S0i-1761988153571.js";import{l as y,a as N}from"./index-BNm4ZFjM-1761988153571.js";import"./vendor_misc-i1ZNofER-1761988153571.js";import"./vendor_axios-ngrFHoWO-1761988153571.js";function L(){const n=f(),i=j(),[o,c]=t.useState(!1),[m,r]=t.useState(""),[u,x]=t.useState(""),[s,b]=t.useState({email:"",password:""});t.useEffect(()=>{i.state?.message&&x(i.state.message)},[i]);const p=d=>{const{name:a,value:l}=d.target;b({...s,[a]:l}),r("")},h=async d=>{d.preventDefault(),r(""),x(""),c(!0);try{const a=await N.login(s.email,s.password);if(a.success){const l=a.data.user;l.role==="admin"?n("/admin"):l.role==="chw"?n("/chw"):n("/user")}}catch(a){a.response?.status===403?r("Your account is pending approval. You will receive an email once approved."):r(a.response?.data?.message||"Invalid email or password")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-blue to-primary-green p-4",children:e.jsxs("div",{className:"card max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:y,alt:"UmutiSafe Logo",className:"w-20 h-20 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-text-dark dark:text-text-light mb-2",children:"UmutiSafe"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Safe Medicine Disposal Platform"})]}),m&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg",children:m}),u&&e.jsx("div",{className:"mb-4 p-4 bg-blue-100 dark:bg-blue-900/30 border border-blue-400 dark:border-blue-700 text-blue-700 dark:text-blue-400 rounded-lg",children:u}),e.jsxs("form",{onSubmit:h,className:"space-y-4 mb-6",children:[e.jsx(g,{label:"Email",id:"email",name:"email",type:"email",value:s.email,onChange:p,placeholder:"your.email@example.com",required:!0}),e.jsx(g,{label:"Password",id:"password",name:"password",type:"password",value:s.password,onChange:p,placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:o,children:o?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Signing In..."]}):"Sign In"})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(v,{to:"/register",className:"text-primary-blue dark:text-accent-cta hover:underline font-medium",children:"Create Account"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Need help?"," ",e.jsx("a",{href:"tel:+250788000000",className:"text-primary-blue dark:text-accent-cta hover:underline",children:"Call +250 788 000 000"})]})})]})})}export{L as default};
