import{r as l,j as e,ab as D,a9 as I,aa as M,k as P}from"./vendor_react-CK1M0B1O-1761988251229.js";import{T as q}from"./Table-p0UcKWoY-1761988251229.js";import{M as F}from"./Modal-D3WPayf--1761988251229.js";import{I as y}from"./Input-BvYti0rl-1761988251229.js";import{S as h}from"./Select-BAMn-yuu-1761988251229.js";import{T as f}from"./Textarea-DSLkmD4_-1761988251229.js";import{e as o}from"./index-BPH-ltX_-1761988251229.js";import"./vendor_misc-i1ZNofER-1761988251229.js";import"./vendor_axios-ngrFHoWO-1761988251229.js";function K(){const[m,j]=l.useState([]),[v,p]=l.useState(!0),[g,N]=l.useState(""),[T,i]=l.useState(!1),[n,x]=l.useState(null),[d,b]=l.useState(!1),[s,c]=l.useState({title:"",icon:"AlertTriangle",summary:"",content:"",category:"safety",displayOrder:0});l.useEffect(()=>{u()},[]);const u=async()=>{try{p(!0);const t=await o.getAll();t.success&&j(t.data)}catch(t){console.error("Error fetching tips:",t),N("Failed to load education tips")}finally{p(!1)}},k=()=>{x(null),c({title:"",icon:"AlertTriangle",summary:"",content:"",category:"safety",displayOrder:0}),i(!0)},S=t=>{x(t),c({title:t.title||"",icon:t.icon||"AlertTriangle",summary:t.summary||"",content:t.content||"",category:t.category||"safety",displayOrder:t.displayOrder||0}),i(!0)},C=async t=>{if(confirm(`Are you sure you want to delete "${t.title}"?`))try{(await o.delete(t.id)).success&&(alert("Education tip deleted successfully!"),u())}catch(a){console.error("Error deleting tip:",a),alert("Failed to delete education tip. Please try again.")}},E=async t=>{if(t.preventDefault(),!s.title||!s.summary||!s.content){alert("Please fill in all required fields");return}try{b(!0);let a;n?a=await o.update(n.id,s):a=await o.create(s),a.success&&(alert(`Education tip ${n?"updated":"created"} successfully!`),i(!1),u())}catch(a){console.error("Error saving tip:",a),alert("Failed to save education tip. Please try again.")}finally{b(!1)}},r=t=>{const{name:a,value:w}=t.target;c(O=>({...O,[a]:w}))},A=[{key:"title",label:"Title",sortable:!0,render:(t,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-blue bg-opacity-10 rounded-lg",children:e.jsx(P,{className:"w-5 h-5 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.summary?.substring(0,50),"..."]})]})]})},{key:"category",label:"Category",sortable:!0,render:t=>e.jsx("span",{className:"badge badge-info",children:t?.toUpperCase()||"N/A"})},{key:"displayOrder",label:"Order",sortable:!0},{key:"isActive",label:"Status",sortable:!0,render:t=>e.jsx("span",{className:`badge badge-${t?"success":"danger"}`,children:t?"Active":"Inactive"})}];return v?e.jsx("div",{className:"p-4 lg:p-8 pb-24 lg:pb-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-blue mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading education tips..."})]})})}):e.jsxs("div",{className:"p-4 lg:p-8 pb-24 lg:pb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-text-dark dark:text-text-light mb-2",children:"Education Tips Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Create and manage educational content for users"}),g&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-lg",children:g}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Education Tips (",m.length," total)"]}),e.jsxs("button",{onClick:k,className:"btn-primary",children:[e.jsx(D,{className:"w-4 h-4"}),"Add Education Tip"]})]}),e.jsx(q,{columns:A,data:m,actions:t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S(t),className:"btn-outline py-2 px-3 text-sm",title:"Edit tip",children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(t),className:"btn-outline py-2 px-3 text-sm text-red-600 border-red-600 hover:bg-red-50 dark:hover:bg-red-900 dark:hover:bg-opacity-20",title:"Delete tip",children:e.jsx(M,{className:"w-4 h-4"})})]})})]}),e.jsx(F,{isOpen:T,onClose:()=>i(!1),title:n?"Edit Education Tip":"Add New Education Tip",size:"lg",children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx(y,{label:"Title *",id:"title",name:"title",value:s.title,onChange:r,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{label:"Icon",id:"icon",name:"icon",value:s.icon,onChange:r,options:[{value:"AlertTriangle",label:"Alert Triangle"},{value:"Clock",label:"Clock"},{value:"Lock",label:"Lock"},{value:"Users",label:"Users"},{value:"ShieldAlert",label:"Shield Alert"},{value:"Heart",label:"Heart"}]}),e.jsx(h,{label:"Category",id:"category",name:"category",value:s.category,onChange:r,options:[{value:"safety",label:"Safety"},{value:"disposal",label:"Disposal"},{value:"storage",label:"Storage"},{value:"general",label:"General"}]})]}),e.jsx(y,{label:"Display Order",id:"displayOrder",name:"displayOrder",type:"number",value:s.displayOrder,onChange:r}),e.jsx(f,{label:"Summary *",id:"summary",name:"summary",value:s.summary,onChange:r,rows:2,placeholder:"Brief summary of the tip...",required:!0}),e.jsx(f,{label:"Content *",id:"content",name:"content",value:s.content,onChange:r,rows:5,placeholder:"Detailed content of the education tip...",required:!0}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn-outline flex-1",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",disabled:d,children:d?"Saving...":n?"Update Tip":"Add Tip"})]})]})})]})}export{K as default};
