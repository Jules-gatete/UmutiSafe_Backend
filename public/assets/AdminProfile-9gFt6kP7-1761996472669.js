import{r as l,j as e}from"./vendor_react-9x5ZZJiw-1761996472669.js";import{a as p}from"./index-CNNDCTkG-1761996472669.js";import"./vendor_misc-i1ZNofER-1761996472669.js";import"./vendor_axios-ngrFHoWO-1761996472669.js";function P(){const[x,n]=l.useState(null),[h,i]=l.useState(!0),[o,c]=l.useState(!1),[m,d]=l.useState(""),[t,u]=l.useState({name:"",email:"",phone:""});l.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const a=await p.getMe();a&&a.success&&(n(a.data),u({name:a.data.name||"",email:a.data.email||"",phone:a.data.phone||""}))}catch(a){console.error("Failed to load profile",a)}finally{i(!1)}},f=a=>{const{name:s,value:r}=a.target;u(v=>({...v,[s]:r}))},b=async a=>{a.preventDefault();try{c(!0);const s=await p.updateProfile({name:t.name,phone:t.phone});if(s&&s.success){const r=s.data||{...x,name:t.name,phone:t.phone};n(r),localStorage.setItem("user",JSON.stringify(r)),d("Profile saved"),setTimeout(()=>d(""),2500)}else console.error("Profile update failed",s),alert(s&&s.error||"Failed to save profile")}catch(s){console.error("Error saving profile",s),alert("Failed to save profile")}finally{c(!1)}};return h?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-blue mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]}):e.jsxs("div",{className:"p-4 lg:p-8 pb-24 lg:pb-8",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Profile"})}),e.jsxs("div",{className:"card max-w-2xl",children:[m&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900 text-green-700 rounded",children:m}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full name"}),e.jsx("input",{name:"name",value:t.name,onChange:f,className:"input-field mt-1 w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email (read-only)"}),e.jsx("input",{name:"email",value:t.email,disabled:!0,className:"input-field mt-1 w-full bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{name:"phone",value:t.phone,onChange:f,className:"input-field mt-1 w-full"})]}),e.jsx("div",{className:"flex gap-3 pt-4",children:e.jsx("button",{type:"submit",className:"btn-primary",disabled:o,children:o?"Saving...":"Save Profile"})})]})]})]})}export{P as default};
